#!/usr/bin/python
import argparse
import json
from proteus import SOAPClient

parser = argparse.ArgumentParser()
parser.add_argument('ip_addr', help='IP Address to delete from Proteus')
parser.add_argument('-c', '--creds', help='path to file containing credentials')
args = parser.parse_args()

# Read in creds file
with open(args.creds) as f:
    creds = json.load(f)

c = SOAPClient(creds['username'], creds['password'])

ip_entity = c.getIP4Address(args.ip_addr)
c.deleteEntity(ip_entity['id'])
print('deleted:')
print(json.dumps(ip_entity, indent=2, sort_keys=True))
c.logout()
